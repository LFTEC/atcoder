# 回文最短路径 - 算法型

## Problem Statement
我们有一个包含 $N$ 个顶点的有向图，顶点编号为 $1, 2, \ldots, N$ 。

关于边的信息由 $N^2$ 个字符 $C_{1,1}, C_{1,2}, \ldots, C_{1,N}, C_{2,1}, \ldots, C_{N,N}$ 给出。其中，每个 $C_{i,j}$ 要么是一个小写英文字母，要么是 `-`。

如果 $C_{i,j}$ 是一个小写英文字母，则存在一条从顶点 $i$ 到顶点 $j$ 的带标签 $C_{i,j}$ 的有向边。如果 $C_{i,j}$ 是 `-`，则不存在从顶点 $i$ 到顶点 $j$ 的边。

对于每个整数对 $(i,j)$ （其中 $1 \leq i,j \leq N$ ），回答以下问题：

在所有从顶点 $i$ 到顶点 $j$ 的路径中（路径不一定是简单的），如果这些路径上的边标签的串联形成一个回文，那么最短的这样的路径的长度是多少？如果不存在这样的路径，则答案为 $-1$ 。

## Constraints
- $1 \leq N \leq 100$ 
- $N$ 是一个整数。
- 每个 $C_{i,j}$ 要么是一个小写英文字母，要么是 `-`。

## Input
输入通过标准输入给出，格式如下：

```math
\begin{align}
N\\
C_{1,1}\ C_{1,2}\ \cdots C_{1,N} \\
C_{2,1}\ C_{2,2}\ \cdots C_{2,N} \\
\vdots \\
C_{N,1}\ C_{N,2}\ \cdots C_{N,N}
\end{align}
```

## Output
设 $A_{i,j}$ 为对整数对 $(i,j)$ 的答案。请按照以下格式输出：

```math
\begin{align}
A_{1,1}\ A_{1,2}\ \cdots A_{1,N} \\
A_{2,1}\ A_{2,2}\ \cdots A_{2,N} \\
\vdots \\
A_{N,1}\ A_{N,2}\ \cdots A_{N,N}
\end{align}
```

## Sample Input 1
```
4
ab--
--b-
---a
c---
```

## Sample Outout 1
```
0 1 2 4
-1 0 1 -1
3 -1 0 1
1 -1 -1 0
```

例如，考虑整数对 $(i,j) = (1,4)$ 的情况。  
通过选择路径 $1 \rightarrow 1 \rightarrow 2 \rightarrow 3 \rightarrow 4$ ，并按顺序连接其边上的标签，我们得到字符串 `abba`，这是一个回文。
不存在长度不超过 3 的从顶点 1 到顶点 4 的路径，其标签连接后为回文。因此， $(1,4)$ 的答案是 4。

需要注意的是，空字符串也被视为回文。

## Sample Input 2
```
5
us---
-st--
--s--
u--s-
---ts
```

## Sample Output 2
```
0 1 3 -1 -1
-1 0 1 -1 -1
-1 -1 0 -1 -1
1 3 -1 0 -1
-1 -1 5 1 0
```

## 解析
根据回文数的定义，我们可以推导出以下结论：
- 空字符串是回文数
- 长度为1的字符串是回文数
- 上述两种情况的回文数前后加相同字母仍为回文数，以此类推

我们可以根据上面的推论来做这道题。设 $G(i,j)$ 为最终答案，即最小回文数长度，我们可以很简单的推出下面两个结论：
- $G(i,i) = 0$ 自己连自己最短回文数一定是0
- 对于任何 $C(i,j)$ != "-"， $G(i,j) = 1$

然后，我们可以用类似DP的方式进行后续的计算。设 $G(i,j)$ 已知，且 $C(x,i) \neq -, C(j,y) \neq -, C(x,i) = C(j,y)$ 。则 $G(x,y) = G(i,j) + 2$

到这里应该就很好理解了，只要构建一个队列，将前面等于0和1的节点先压入队列，然后依次取出，计算所有前后相连路径值相同的数加2，然后再压入队列，以此类推，即可得到整个答案。
